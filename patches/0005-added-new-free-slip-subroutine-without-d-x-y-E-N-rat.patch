From 4346c425d4a2232d95f7a5946c78a99b1320de98 Mon Sep 17 00:00:00 2001
From: dpath2o <dpath2o@mac.com>
Date: Wed, 22 Oct 2025 05:35:57 +1100
Subject: [PATCH 05/34] added new free-slip subroutine without d[x|y][E|N]
 ratios

---
 cicecore/cicedyn/dynamics/ice_dyn_shared.F90 | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/cicecore/cicedyn/dynamics/ice_dyn_shared.F90 b/cicecore/cicedyn/dynamics/ice_dyn_shared.F90
index 49c3550..02c3271 100644
--- a/cicecore/cicedyn/dynamics/ice_dyn_shared.F90
+++ b/cicecore/cicedyn/dynamics/ice_dyn_shared.F90
@@ -2393,11 +2393,10 @@ end subroutine strain_rates_U
 
 !=======================================================================
 ! Compute strain rates at the U point — FREE-SLIP (Neumann)
-! Inputs are identical to strain_rates_U_no_slip
 ! Free-slip = zero normal flow; zero normal derivative of tangential
 !
 ! IMPORTANT:
-!  - Do NOT clamp ratios: use rp = -ratio (even reflection)
+!  - no clamping ratios: use rp = -ratio (mimic reflection)
 !  - No changes to calling signature versus no-slip version
 !  - Prints shearU at coastal U points (last subcycle only)
 !=======================================================================
@@ -2523,10 +2522,11 @@ subroutine strain_rates_U_free_slip(nx_block, ny_block,  &
    end subroutine strain_rates_U_free_slip
 
 !=======================================================================
-! Compute strain rates at the U point for Neumann boundary conditions
-! "free-slip" (no distance ratios; even reflection with unit factor)
+! Compute strain rates at the U point — FREE-SLIP (Neumann)
+! Free-slip = zero normal flow; zero normal derivative of tangential
+! this version does not use grid cell distance  (d[x|y][E|N]) ratios
 !
-! author: dpath2o (per request), Oct 2025
+! author: dpath2o, Oct 2025
 ! Notes:
 !  - When a neighbor face is land, substitute the interior face with
 !    an even reflection of *unit* magnitude (i.e., ghost = +interior).
@@ -2574,7 +2574,7 @@ subroutine strain_rates_U_free_slip_noratio(nx_block, ny_block,  &
          DeltaU(:,:)   = c0
 
          !---------------------------------------------------------------
-         ! Free-slip stencil at U without distance ratios:
+         ! Free-slip at U without distance ratios:
          ! If the neighbor face is land, use even reflection with unit
          ! factor: ghost = + interior. Implemented via mask switches.
          !---------------------------------------------------------------
-- 
2.43.7

